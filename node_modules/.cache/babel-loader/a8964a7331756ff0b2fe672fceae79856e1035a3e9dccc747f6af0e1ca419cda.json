{"ast":null,"code":"import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { HorizontalBlurShader, VerticalBlurShader } from 'three-stdlib';\nconst ContactShadows = /*#__PURE__*/React.forwardRef(({\n  scale,\n  frames = Infinity,\n  opacity = 1,\n  width = 1,\n  height = 1,\n  blur = 1,\n  far = 10,\n  resolution = 256,\n  smooth = true,\n  color = '#000000',\n  ...props\n}, ref) => {\n  const scene = useThree(({\n    scene\n  }) => scene);\n  const gl = useThree(({\n    gl\n  }) => gl);\n  const shadowCamera = React.useRef(null);\n  width = width * (Array.isArray(scale) ? scale[0] : scale || 1);\n  height = height * (Array.isArray(scale) ? scale[1] : scale || 1);\n  const [renderTarget, planeGeometry, depthMaterial, blurPlane, horizontalBlurMaterial, verticalBlurMaterial, renderTargetBlur] = React.useMemo(() => {\n    const renderTarget = new THREE.WebGLRenderTarget(resolution, resolution);\n    const renderTargetBlur = new THREE.WebGLRenderTarget(resolution, resolution);\n    renderTargetBlur.texture.generateMipmaps = renderTarget.texture.generateMipmaps = false;\n    const planeGeometry = new THREE.PlaneBufferGeometry(width, height).rotateX(Math.PI / 2);\n    const blurPlane = new THREE.Mesh(planeGeometry);\n    const depthMaterial = new THREE.MeshDepthMaterial();\n    depthMaterial.depthTest = depthMaterial.depthWrite = false;\n    depthMaterial.onBeforeCompile = shader => {\n      shader.uniforms = {\n        ...shader.uniforms,\n        ucolor: {\n          value: new THREE.Color(color).convertSRGBToLinear()\n        }\n      };\n      shader.fragmentShader = shader.fragmentShader.replace(`void main() {`,\n      //\n      `uniform vec3 ucolor;\n           void main() {\n          `);\n      shader.fragmentShader = shader.fragmentShader.replace('vec4( vec3( 1.0 - fragCoordZ ), opacity );', 'vec4( ucolor, ( 1.0 - fragCoordZ ) * 1.0 );');\n    };\n    const horizontalBlurMaterial = new THREE.ShaderMaterial(HorizontalBlurShader);\n    const verticalBlurMaterial = new THREE.ShaderMaterial(VerticalBlurShader);\n    verticalBlurMaterial.depthTest = horizontalBlurMaterial.depthTest = false;\n    return [renderTarget, planeGeometry, depthMaterial, blurPlane, horizontalBlurMaterial, verticalBlurMaterial, renderTargetBlur];\n  }, [resolution, width, height, scale]);\n  const blurShadows = React.useCallback(blur => {\n    blurPlane.visible = true;\n    blurPlane.material = horizontalBlurMaterial;\n    horizontalBlurMaterial.uniforms.tDiffuse.value = renderTarget.texture;\n    horizontalBlurMaterial.uniforms.h.value = blur * 1 / 256;\n    gl.setRenderTarget(renderTargetBlur);\n    gl.render(blurPlane, shadowCamera.current);\n    blurPlane.material = verticalBlurMaterial;\n    verticalBlurMaterial.uniforms.tDiffuse.value = renderTargetBlur.texture;\n    verticalBlurMaterial.uniforms.v.value = blur * 1 / 256;\n    gl.setRenderTarget(renderTarget);\n    gl.render(blurPlane, shadowCamera.current);\n    blurPlane.visible = false;\n  }, []);\n  let count = 0;\n  useFrame(() => {\n    if (shadowCamera.current && (frames === Infinity || count < frames)) {\n      const initialBackground = scene.background;\n      scene.background = null;\n      const initialOverrideMaterial = scene.overrideMaterial;\n      scene.overrideMaterial = depthMaterial;\n      gl.setRenderTarget(renderTarget);\n      gl.render(scene, shadowCamera.current);\n      scene.overrideMaterial = initialOverrideMaterial;\n      blurShadows(blur);\n      if (smooth) blurShadows(blur * 0.4);\n      gl.setRenderTarget(null);\n      scene.background = initialBackground;\n      count++;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", _extends({\n    \"rotation-x\": Math.PI / 2\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"mesh\", {\n    geometry: planeGeometry,\n    scale: [1, -1, 1],\n    rotation: [-Math.PI / 2, 0, 0]\n  }, /*#__PURE__*/React.createElement(\"meshBasicMaterial\", {\n    map: renderTarget.texture,\n    transparent: true,\n    opacity: opacity\n  })), /*#__PURE__*/React.createElement(\"orthographicCamera\", {\n    ref: shadowCamera,\n    args: [-width / 2, width / 2, height / 2, -height / 2, 0, far]\n  }));\n});\nexport { ContactShadows };","map":{"version":3,"names":["_extends","React","THREE","useThree","useFrame","HorizontalBlurShader","VerticalBlurShader","ContactShadows","forwardRef","scale","frames","Infinity","opacity","width","height","blur","far","resolution","smooth","color","props","ref","scene","gl","shadowCamera","useRef","Array","isArray","renderTarget","planeGeometry","depthMaterial","blurPlane","horizontalBlurMaterial","verticalBlurMaterial","renderTargetBlur","useMemo","WebGLRenderTarget","texture","generateMipmaps","PlaneBufferGeometry","rotateX","Math","PI","Mesh","MeshDepthMaterial","depthTest","depthWrite","onBeforeCompile","shader","uniforms","ucolor","value","Color","convertSRGBToLinear","fragmentShader","replace","ShaderMaterial","blurShadows","useCallback","visible","material","tDiffuse","h","setRenderTarget","render","current","v","count","initialBackground","background","initialOverrideMaterial","overrideMaterial","createElement","geometry","rotation","map","transparent","args"],"sources":["C:/0-Projects/Test/WebAR/WebAR_frontend/node_modules/@react-three/drei/core/ContactShadows.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { HorizontalBlurShader, VerticalBlurShader } from 'three-stdlib';\n\nconst ContactShadows = /*#__PURE__*/React.forwardRef(({\n  scale,\n  frames = Infinity,\n  opacity = 1,\n  width = 1,\n  height = 1,\n  blur = 1,\n  far = 10,\n  resolution = 256,\n  smooth = true,\n  color = '#000000',\n  ...props\n}, ref) => {\n  const scene = useThree(({\n    scene\n  }) => scene);\n  const gl = useThree(({\n    gl\n  }) => gl);\n  const shadowCamera = React.useRef(null);\n  width = width * (Array.isArray(scale) ? scale[0] : scale || 1);\n  height = height * (Array.isArray(scale) ? scale[1] : scale || 1);\n  const [renderTarget, planeGeometry, depthMaterial, blurPlane, horizontalBlurMaterial, verticalBlurMaterial, renderTargetBlur] = React.useMemo(() => {\n    const renderTarget = new THREE.WebGLRenderTarget(resolution, resolution);\n    const renderTargetBlur = new THREE.WebGLRenderTarget(resolution, resolution);\n    renderTargetBlur.texture.generateMipmaps = renderTarget.texture.generateMipmaps = false;\n    const planeGeometry = new THREE.PlaneBufferGeometry(width, height).rotateX(Math.PI / 2);\n    const blurPlane = new THREE.Mesh(planeGeometry);\n    const depthMaterial = new THREE.MeshDepthMaterial();\n    depthMaterial.depthTest = depthMaterial.depthWrite = false;\n\n    depthMaterial.onBeforeCompile = shader => {\n      shader.uniforms = { ...shader.uniforms,\n        ucolor: {\n          value: new THREE.Color(color).convertSRGBToLinear()\n        }\n      };\n      shader.fragmentShader = shader.fragmentShader.replace(`void main() {`, //\n      `uniform vec3 ucolor;\n           void main() {\n          `);\n      shader.fragmentShader = shader.fragmentShader.replace('vec4( vec3( 1.0 - fragCoordZ ), opacity );', 'vec4( ucolor, ( 1.0 - fragCoordZ ) * 1.0 );');\n    };\n\n    const horizontalBlurMaterial = new THREE.ShaderMaterial(HorizontalBlurShader);\n    const verticalBlurMaterial = new THREE.ShaderMaterial(VerticalBlurShader);\n    verticalBlurMaterial.depthTest = horizontalBlurMaterial.depthTest = false;\n    return [renderTarget, planeGeometry, depthMaterial, blurPlane, horizontalBlurMaterial, verticalBlurMaterial, renderTargetBlur];\n  }, [resolution, width, height, scale]);\n  const blurShadows = React.useCallback(blur => {\n    blurPlane.visible = true;\n    blurPlane.material = horizontalBlurMaterial;\n    horizontalBlurMaterial.uniforms.tDiffuse.value = renderTarget.texture;\n    horizontalBlurMaterial.uniforms.h.value = blur * 1 / 256;\n    gl.setRenderTarget(renderTargetBlur);\n    gl.render(blurPlane, shadowCamera.current);\n    blurPlane.material = verticalBlurMaterial;\n    verticalBlurMaterial.uniforms.tDiffuse.value = renderTargetBlur.texture;\n    verticalBlurMaterial.uniforms.v.value = blur * 1 / 256;\n    gl.setRenderTarget(renderTarget);\n    gl.render(blurPlane, shadowCamera.current);\n    blurPlane.visible = false;\n  }, []);\n  let count = 0;\n  useFrame(() => {\n    if (shadowCamera.current && (frames === Infinity || count < frames)) {\n      const initialBackground = scene.background;\n      scene.background = null;\n      const initialOverrideMaterial = scene.overrideMaterial;\n      scene.overrideMaterial = depthMaterial;\n      gl.setRenderTarget(renderTarget);\n      gl.render(scene, shadowCamera.current);\n      scene.overrideMaterial = initialOverrideMaterial;\n      blurShadows(blur);\n      if (smooth) blurShadows(blur * 0.4);\n      gl.setRenderTarget(null);\n      scene.background = initialBackground;\n      count++;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", _extends({\n    \"rotation-x\": Math.PI / 2\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"mesh\", {\n    geometry: planeGeometry,\n    scale: [1, -1, 1],\n    rotation: [-Math.PI / 2, 0, 0]\n  }, /*#__PURE__*/React.createElement(\"meshBasicMaterial\", {\n    map: renderTarget.texture,\n    transparent: true,\n    opacity: opacity\n  })), /*#__PURE__*/React.createElement(\"orthographicCamera\", {\n    ref: shadowCamera,\n    args: [-width / 2, width / 2, height / 2, -height / 2, 0, far]\n  }));\n});\n\nexport { ContactShadows };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}